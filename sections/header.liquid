{% comment %}
  Header Section
  - Logo
  - Navigation menu
  - Locale selector
  - Cart icon with count
{% endcomment %}

<header class="header">
  <div class="container">
    <div class="header__inner">
      {%- comment -%} Logo {%- endcomment -%}
      <div class="header__logo">
        {%- if section.settings.logo != blank -%}
          <a href="{{ routes.root_url }}">
            <img src="{{ section.settings.logo | image_url: width: 200 }}" 
                 alt="{{ shop.name }}" 
                 width="auto" 
                 height="40"
                 loading="lazy">
          </a>
        {%- else -%}
          <a href="{{ routes.root_url }}" class="header__logo-text">
            {{ shop.name }}
          </a>
        {%- endif -%}
      </div>

      {%- comment -%} Mobile Menu Toggle {%- endcomment -%}
      <button class="header__mobile-toggle" aria-label="Menu">
        â˜°
      </button>

      {%- comment -%} Navigation {%- endcomment -%}
      <nav class="header__nav" role="navigation">
        <ul class="header__menu">
          {%- for link in section.settings.menu.links -%}
            <li class="header__menu-item">
              <a href="{{ link.url }}">{{ link.title }}</a>
            </li>
          {%- endfor -%}
        </ul>
      </nav>

      {%- comment -%} Actions (Locale + Cart) {%- endcomment -%}
      <div class="header__actions">
        {%- if section.settings.show_locale_selector and shop.published_locales.size > 1 -%}
          <div class="header__locale-selector">
            <form method="post" action="{{ routes.root_url }}cart/update">
              <select name="locale_code" onchange="this.form.submit()">
                {%- for locale in shop.published_locales -%}
                  <option value="{{ locale.iso_code }}" {% if locale.iso_code == request.locale.iso_code %}selected{% endif %}>
                    {{ locale.endonym_name }}
                  </option>
                {%- endfor -%}
              </select>
            </form>
          </div>
        {%- endif -%}

        <a href="{{ routes.cart_url }}" class="header__cart-link">
          <span class="cart-count" style="display: {% if cart.item_count > 0 %}block{% else %}none{% endif %};">
            {{ cart.item_count }}
          </span>
          {{ 'general.cart.title' | t }}
        </a>
      </div>
    </div>
  </div>
</header>

{% schema %}
{
  "name": "Header",
  "settings": [
    {
      "type": "image_picker",
      "id": "logo",
      "label": "Logo Image"
    },
    {
      "type": "link_list",
      "id": "menu",
      "label": "Menu",
      "default": "main-menu"
    },
    {
      "type": "checkbox",
      "id": "show_locale_selector",
      "label": "Show Language Selector",
      "default": true
    }
  ]
}
{% endschema %}
